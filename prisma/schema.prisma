datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

enum VerificationStatus {
  UNVERIFIED
  PENDING
  VERIFIED
}

model User {
  id                   Int                   @id @default(autoincrement())
  email                String                @unique
  name                 String?
  passwordHash         String

  verificationStatus   VerificationStatus    @default(UNVERIFIED)
  verificationNote     String?
  verifiedAt           DateTime?

  verificationRequests VerificationRequest[]

  createdAt            DateTime              @default(now())
  updatedAt            DateTime              @updatedAt
}

model VerificationRequest {
  id        Int                @id @default(autoincrement())
  user      User               @relation(fields: [userId], references: [id])
  userId    Int
  status    VerificationStatus @default(PENDING)
  note      String?
  createdAt DateTime           @default(now())
  updatedAt DateTime           @updatedAt

  @@index([userId])
  @@index([status])
}
